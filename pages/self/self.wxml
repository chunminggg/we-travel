<!--pages/self/self.wxml-->
<view wx:if="{{loginType==='login'}}">
  <i-panel>
    <view style="padding: 16px">
      <view class='head-icon-wrap'>
        <view class="head-icon">
          <open-data type="userAvatarUrl"></open-data>
        </view>
      </view>
      <i-input maxlength="-1" value="{{ phone }}" bind:change="changePhone" type="number" title="手机号" placeholder="请输入手机号" />
      <view class="code-wrap">
        <i-input maxlength="-1" value="{{ code }}" bind:change="changeCode" type="text" title="验证码" placeholder="请输入手机验证码" />
        <i-button i-class="small-btn" wx:if="{{timeCount==60}}" bind:click="getCode" size="small" shape="circle">获取验证码</i-button>
        <i-button i-class="small-btn" wx:else disabled size="small" shape="circle">{{timeCount}}秒后重新获取</i-button>
      </view>
    </view>
  </i-panel>
  <i-button bind:click="login" type="primary" size="large">登录</i-button>
</view>
<view wx:else>
  <i-panel>
    <view style="padding: 16px">
      <view class='head-icon-wrap'>
        <view class="head-icon">
          <open-data type="userAvatarUrl"></open-data>
        </view>
      </view>
      <i-input disabled maxlength="-1" value="{{ phone }}" bind:change="changePhone" type="number" title="手机号" placeholder="请输入手机号" />
      <view class='code-wrap first'>
        <text class='name-text'>姓名</text>
        <input class='name-input' placeholder="未设置" focus="{{focus}}" value="{{ name }}" bindinput="changeName" bind:focus="focus" bind:blur="blur" type="text" disabled="{{!ifEditingName}}" />
        <i-button class='option-button' wx:if="{{!ifEditingName}}" bind:click="editName" size="small" shape="circle">修改</i-button>
        <i-button class='option-button' wx:else bind:click="saveName" type="primary" size="small" shape="circle">确定</i-button>
      </view>
      <view class='code-wrap'>
        <text class='name-text'>商家名称</text>
        <input class='name-input' placeholder="未设置" focus="{{focus2}}" value="{{ name2 }}" bindinput="changeName2" bind:focus="focus2" bind:blur="blur2" type="text" disabled="{{!ifEditingName2}}" />
        <i-button class='option-button' wx:if="{{!ifEditingName2}}" bind:click="editName2" size="small" shape="circle">修改</i-button>
        <i-button class='option-button' wx:else bind:click="saveName2" type="primary" size="small" shape="circle">确定</i-button>
      </view>
    </view>
    <view>
     <view class="head-icon-image" wx:if="{{userImageUrl.length}}">
        <view>
         <image
         mode='scaleToFill'
          src="{{userImageUrl}}"
        ></image></view>
        </view>
     
    <button bindtap='uploadImageAction'>上传商户二维码</button>
    </view>
  </i-panel>
</view>