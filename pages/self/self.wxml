<!--pages/self/self.wxml-->
<view wx:if="{{loginType==='login'}}">
  <i-panel>
    <view style="padding: 16px">
      <view class='head-icon-wrap'>
        <view class="head-icon">
          <open-data type="userAvatarUrl"></open-data>
        </view>
      </view>
      <i-input maxlength="-1" value="{{ phone }}" bind:change="changePhone" type="number" title="手机号" placeholder="请输入手机号" />
      <view class="code-wrap">
        <i-input maxlength="-1" value="{{ code }}" bind:change="changeCode" type="text" title="验证码" placeholder="请输入手机验证码" />
        <i-button i-class="small-btn" wx:if="{{timeCount==60}}" bind:click="getCode" size="small" shape="circle">获取验证码</i-button>
        <i-button i-class="small-btn" wx:else disabled size="small" shape="circle">{{timeCount}}秒后重新获取</i-button>
      </view>
    </view>
  </i-panel>
  <i-button bind:click="login" type="primary" size="large">登录</i-button>
</view>
<view wx:else>
  <i-panel>
    <view style="padding: 16px">
      <view class='head-icon-wrap'>
        <view class="head-icon">
          <open-data type="userAvatarUrl"></open-data>
        </view>
      </view>
      <i-input disabled maxlength="-1" value="{{ phone }}" bind:change="changePhone" type="number" title="手机号" placeholder="请输入手机号" />
      <view class='code-wrap'>
        <i-input disabled="{{!ifEditingName}}" maxlength="-1" value="{{ name }}" bind:change="changeName" type="text" title="姓名" placeholder="未设置" />
        <i-button wx:if="{{!ifEditingName}}" bind:click="editName" size="small" shape="circle">修改</i-button>
        <i-button wx:else bind:click="saveName" type="primary" size="small" shape="circle">确定</i-button>
      </view>
    </view>
  </i-panel>
</view>